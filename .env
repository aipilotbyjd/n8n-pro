# =============================================================================
# n8n Pro Environment Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# General Application Settings
# -----------------------------------------------------------------------------
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# API Server Configuration
# -----------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8080
API_READ_TIMEOUT=30s
API_WRITE_TIMEOUT=30s
API_IDLE_TIMEOUT=120s
API_MAX_REQUEST_SIZE=10485760
API_ENABLE_CORS=true
API_CORS_ALLOWED_ORIGINS=*
API_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
API_CORS_ALLOWED_HEADERS=*
API_ENABLE_RATE_LIMIT=true
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW=1h
API_ENABLE_GZIP=true
API_ENABLE_RECOVERY=true
API_ENABLE_REQUEST_LOGGING=true
API_TLS_ENABLED=false
API_TLS_CERT_FILE=
API_TLS_KEY_FILE=

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=n8n_pro
DB_USER=postgres
DB_PASSWORD=password
DB_SSL_MODE=disable
DB_MAX_OPEN_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=5
DB_CONNECTION_LIFETIME=5m
DB_CONNECTION_TIMEOUT=10s
DB_ENABLE_MIGRATIONS=true
DB_MIGRATIONS_PATH=migrations
DB_ENABLE_QUERY_LOGGING=false
DB_SLOW_QUERY_THRESHOLD=2s
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1s

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0
REDIS_MAX_RETRIES=3
REDIS_MIN_RETRY_BACKOFF=8ms
REDIS_MAX_RETRY_BACKOFF=512ms
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNECTIONS=5
REDIS_MAX_IDLE_CONNECTIONS=10
REDIS_CONN_MAX_LIFETIME=30m
REDIS_TLS_ENABLED=false
REDIS_CLUSTER_MODE=false
REDIS_CLUSTER_NODES=

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
KAFKA_BROKERS=localhost:9092
KAFKA_TOPIC=n8n-workflows
KAFKA_GROUP_ID=n8n-workers
KAFKA_CLIENT_ID=n8n-pro
KAFKA_VERSION=2.8.0
KAFKA_ENABLE_SASL=false
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=
KAFKA_SASL_PASSWORD=
KAFKA_ENABLE_TLS=false
KAFKA_TLS_INSECURE_SKIP_VERIFY=false
KAFKA_PRODUCER_RETRY_MAX=3
KAFKA_PRODUCER_RETURN_SUCCESSES=true
KAFKA_PRODUCER_FLUSH_FREQUENCY=500ms
KAFKA_CONSUMER_RETRY_BACKOFF=2s
KAFKA_CONSUMER_FETCH_MIN=1
KAFKA_CONSUMER_FETCH_DEFAULT=1048576
KAFKA_CONSUMER_MAX_WAIT_TIME=250ms
KAFKA_SESSION_TIMEOUT=10s
KAFKA_HEARTBEAT_INTERVAL=3s

# -----------------------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h
REFRESH_TOKEN_EXPIRATION=168h
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_SYMBOLS=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_UPPER=true
PASSWORD_REQUIRE_LOWER=true
MAX_LOGIN_ATTEMPTS=5
LOGIN_ATTEMPT_WINDOW=15m
ENABLE_MFA=false
MFA_ISSUER=n8n-pro
ENABLE_OAUTH=false
OAUTH_PROVIDERS=

# OAuth Provider Configuration
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
GOOGLE_OAUTH_REDIRECT_URL=
GOOGLE_OAUTH_SCOPES=openid,profile,email

GITHUB_OAUTH_CLIENT_ID=
GITHUB_OAUTH_CLIENT_SECRET=
GITHUB_OAUTH_REDIRECT_URL=
GITHUB_OAUTH_SCOPES=user:email

# Session Configuration
SESSION_COOKIE_NAME=n8n_session
SESSION_COOKIE_DOMAIN=
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTP_ONLY=true

# -----------------------------------------------------------------------------
# Webhook Service Configuration
# -----------------------------------------------------------------------------
WEBHOOK_HOST=0.0.0.0
WEBHOOK_PORT=8081
WEBHOOK_PATH=/webhook
WEBHOOK_MAX_PAYLOAD_SIZE=10485760
WEBHOOK_TIMEOUT=30s
WEBHOOK_ENABLE_SIGNATURE_VERIFY=true
WEBHOOK_SIGNATURE_HEADER=X-Signature
WEBHOOK_SIGNATURE_ALGORITHM=sha256
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=1s
WEBHOOK_ENABLE_LOGGING=true
WEBHOOK_ALLOWED_HOSTS=
WEBHOOK_BLOCKED_HOSTS=localhost,127.0.0.1,0.0.0.0
WEBHOOK_ENABLE_RATE_LIMIT=true
WEBHOOK_RATE_LIMIT_REQUESTS=100
WEBHOOK_RATE_LIMIT_WINDOW=1m

# -----------------------------------------------------------------------------
# Scheduler Configuration
# -----------------------------------------------------------------------------
SCHEDULER_ENABLED=true
SCHEDULER_CHECK_INTERVAL=30s
SCHEDULER_MAX_CONCURRENT_JOBS=10
SCHEDULER_JOB_TIMEOUT=5m
SCHEDULER_ENABLE_DISTRIBUTED_MODE=false
SCHEDULER_LOCK_TIMEOUT=10m
SCHEDULER_LOCK_REFRESH_INTERVAL=30s
SCHEDULER_CLEANUP_INTERVAL=1h
SCHEDULER_RETAIN_COMPLETED_JOBS=24h
SCHEDULER_RETAIN_FAILED_JOBS=168h

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
ENCRYPTION_KEY=your-encryption-key-32-characters-long
HASH_COST=12
SECURITY_ALLOWED_ORIGINS=
SECURITY_TRUSTED_PROXIES=
SECURITY_ENABLE_CSRF=true
SECURITY_CSRF_TOKEN_LENGTH=32
SECURITY_ENABLE_CONTENT_SECURITY=true
SECURITY_CONTENT_SECURITY_POLICY=default-src 'self'
SECURITY_ENABLE_HSTS=false
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_ENABLE_X_FRAME_OPTIONS=true
SECURITY_X_FRAME_OPTIONS=DENY
SECURITY_ENABLE_X_CONTENT_TYPE=true
SECURITY_ENABLE_XSS_PROTECTION=true
SECURITY_ENABLE_CLICKJACKING=true

# -----------------------------------------------------------------------------
# Metrics Configuration
# -----------------------------------------------------------------------------
METRICS_ENABLED=true
METRICS_HOST=0.0.0.0
METRICS_PORT=9090
METRICS_PATH=/metrics
METRICS_NAMESPACE=n8n_pro
METRICS_SUBSYSTEM=
METRICS_SERVICE_NAME=api

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
STORAGE_PROVIDER=local
STORAGE_LOCAL_PATH=./storage
STORAGE_MAX_FILE_SIZE=104857600
STORAGE_ALLOWED_MIME_TYPES=application/json,text/plain,image/*
STORAGE_ENABLE_ENCRYPTION=false
STORAGE_ENCRYPTION_KEY=
STORAGE_CDN_ENABLED=false
STORAGE_CDN_BASE_URL=

# S3 Configuration (when STORAGE_PROVIDER=s3)
S3_ENDPOINT=
S3_REGION=us-east-1
S3_BUCKET=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_USE_SSL=true
S3_PATH_STYLE=false

# -----------------------------------------------------------------------------
# Email Configuration
# -----------------------------------------------------------------------------
EMAIL_PROVIDER=smtp
EMAIL_FROM_EMAIL=noreply@example.com
EMAIL_FROM_NAME=n8n Pro
EMAIL_REPLY_TO_EMAIL=
EMAIL_TEMPLATES_PATH=./templates/email
EMAIL_ENABLE_RETRIES=true
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY=5s

# SMTP Configuration
SMTP_HOST=localhost
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true
SMTP_USE_SSL=false

# SendGrid Configuration
SENDGRID_API_KEY=

# -----------------------------------------------------------------------------
# Billing Configuration
# -----------------------------------------------------------------------------
BILLING_PROVIDER=stripe
BILLING_ENABLED=false
BILLING_TRIAL_PERIOD_DAYS=14
BILLING_GRACE_PERIOD_DAYS=7
BILLING_WEBHOOK_SECRET=

# Stripe Configuration
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_DEFAULT_CURRENCY=usd
STRIPE_ENABLE_CONNECT=false

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
WORKER_ENABLED=true
WORKER_CONCURRENCY=10
WORKER_QUEUE_NAME=workflow-jobs
WORKER_POLL_INTERVAL=5s
WORKER_JOB_TIMEOUT=10m
WORKER_RETRY_ATTEMPTS=3
WORKER_RETRY_DELAY=30s
WORKER_ENABLE_HEALTH_CHECK=true
WORKER_HEALTH_CHECK_PORT=8082
WORKER_SHUTDOWN_TIMEOUT=30s

# -----------------------------------------------------------------------------
# Sandbox Configuration
# -----------------------------------------------------------------------------
SANDBOX_ENABLED=true
SANDBOX_DEFAULT_CONTEXT=javascript
SANDBOX_MAX_CONCURRENT_JOBS=5
SANDBOX_JOB_TIMEOUT=5m
SANDBOX_MAX_MEMORY_MB=128
SANDBOX_MAX_CPU_PERCENT=50
SANDBOX_MAX_DISK_MB=10
SANDBOX_ENABLE_NODEJS=true
SANDBOX_ENABLE_PYTHON=true
SANDBOX_ENABLE_DOCKER=false
SANDBOX_WORKING_DIRECTORY=/tmp/n8n-sandbox
SANDBOX_ALLOWED_PACKAGES=lodash,axios,moment
SANDBOX_BLOCKED_PACKAGES=fs,child_process
SANDBOX_NETWORK_POLICY=restricted
SANDBOX_ALLOWED_DOMAINS=
SANDBOX_BLOCKED_DOMAINS=localhost,127.0.0.1

# -----------------------------------------------------------------------------
# System Limits
# -----------------------------------------------------------------------------
LIMITS_MAX_WORKFLOWS_PER_TEAM=100
LIMITS_MAX_NODES_PER_WORKFLOW=50
LIMITS_MAX_EXECUTIONS_PER_MINUTE=60
LIMITS_MAX_EXECUTION_TIME=10m
LIMITS_MAX_PAYLOAD_SIZE=52428800
LIMITS_MAX_CONCURRENT_EXECUTIONS=10
LIMITS_MAX_WEBHOOKS_PER_WORKFLOW=5
LIMITS_MAX_TRIGGERS_PER_WORKFLOW=5
LIMITS_MAX_FILE_UPLOAD_SIZE=104857600
LIMITS_MAX_STORAGE_PER_TEAM=10737418240
LIMITS_MAX_USERS_PER_TEAM=25
LIMITS_MAX_TEAMS_PER_USER=5

# -----------------------------------------------------------------------------
# Additional Services (Optional)
# -----------------------------------------------------------------------------

# Sentry (Error Reporting)
SENTRY_DSN=

# New Relic (APM)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=n8n-pro

# DataDog (Monitoring)
DATADOG_API_KEY=
DATADOG_APP_KEY=

# External API Keys (for integrations)
SLACK_CLIENT_ID=
SLACK_CLIENT_SECRET=
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Development / Testing Configuration
# -----------------------------------------------------------------------------
ENABLE_DEBUG_ROUTES=false
ENABLE_PROFILER=false
ENABLE_SWAGGER=false
TEST_DATABASE_URL=postgres://postgres:password@localhost:5432/n8n_pro_test
MOCK_EXTERNAL_SERVICES=false

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_WORKFLOW_VERSIONING=true
FEATURE_WORKFLOW_TEMPLATES=true
FEATURE_TEAM_COLLABORATION=true
FEATURE_ADVANCED_SCHEDULING=true
FEATURE_WEBHOOK_SIGNATURES=true
FEATURE_AUDIT_LOGGING=true
FEATURE_ADVANCED_METRICS=true
FEATURE_CUSTOM_NODES=true
FEATURE_WORKFLOW_SHARING=true
FEATURE_API_RATE_LIMITING=true
